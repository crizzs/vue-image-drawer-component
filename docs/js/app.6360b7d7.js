(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],u=0,h=[];u<r.length;u++)i=r[u],n[i]&&h.push(n[i][0]),n[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={1:0},o=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-image-drawer-component/docs/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([2,0]),a()})({2:function(t,e,a){t.exports=a("Vtdi")},Vtdi:function(t,e,a){"use strict";a.r(e);a("VRzm");var s=a("Kw5r"),n=a("EVdn"),o=a.n(n),i=(a("SYky"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("UploadImage")],1)}),r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-upload-wrapper"},[a("div",{staticClass:"image-upload-field"},[a("input",{ref:"uploader",attrs:{type:"file",multiple:""},on:{change:t.onChange}}),t.imagesPreview.length?t._e():a("div",{staticClass:"upload-image-placeholder"},[t._v("\n           Click / drag and drop images here\n      ")]),a("div",[a("transition-group",{staticClass:"image-upload-preview",attrs:{name:"slide",mode:"out-in",tag:"div"}},[t._l(t.imagesPreview,function(e,s){return a("div",{key:e.key,staticClass:"img-item",style:{"background-image":"url("+e.src+")"}},[a("i",{staticClass:"fa fa-close action-icon removeImageIcon",on:{click:function(e){t.removeImage(s)}}}),a("i",{staticClass:"fa fa-edit action-icon editImageIcon",on:{click:function(a){t.editImage(e)}}})])}),t.imagesPreview.length?a("div",{key:"ccc",staticClass:"img-item upload-card"},[a("input",{ref:"uploader_2",attrs:{type:"file",multiple:""},on:{change:t.onChange}}),t._v("\n           Click / drag and drop images here\n         ")]):t._e()],2)],1)]),t.selectedImage?a("ImageEditor",{on:{input:t.imageEdited},model:{value:t.selectedImage,callback:function(e){t.selectedImage=e},expression:"selectedImage"}}):t._e()],1)},c=[],d=(a("INYr"),a("f3/d"),a("SRfc"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-editor"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"edit-shape d-flex text-center my-3 justify-content-center flex-wrap text-capitalize"},["text"!==t.controls.shape?[a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"line-width"}},[t._v("Line width")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.lineWidth,expression:"controls.lineWidth"}],attrs:{type:"range",id:"line-width",min:1,max:50},domProps:{value:t.controls.lineWidth},on:{__r:function(e){t.$set(t.controls,"lineWidth",e.target.value)}}})]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"stroke-color"}},[t._v("stroke color")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.strokeColor,expression:"controls.strokeColor"}],attrs:{type:"color",id:"stroke-color"},domProps:{value:t.controls.strokeColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"strokeColor",e.target.value)}}})])]:[a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"font-size"}},[t._v("Font size")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.fontSize,expression:"controls.fontSize"}],attrs:{type:"range",id:"font-size",min:1,max:50},domProps:{value:t.controls.fontSize},on:{__r:function(e){t.$set(t.controls,"fontSize",e.target.value)}}})]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"text-color"}},[t._v("text color")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.textColor,expression:"controls.textColor"}],attrs:{type:"color",id:"text-color"},domProps:{value:t.controls.textColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"textColor",e.target.value)}}})])],a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"text-color"}},[t._v("undo")]),a("button",{staticClass:"btn btn-primary btn-sm",class:{disabled:!t.undoBtnActivation},attrs:{disabled:!t.undoBtnActivation},on:{click:t.undoShapes}},[a("i",{staticClass:"fa fa-undo"})])]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"text-color"}},[t._v("redo")]),a("button",{staticClass:"btn btn-primary btn-sm",class:{disabled:!t.shapesStack.redoStackDataStore.length},attrs:{disabled:!t.shapesStack.redoStackDataStore.length},on:{click:t.redoShapes}},[a("i",{staticClass:"fa fa-undo",staticStyle:{transform:"rotateY(180deg)"}})])]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"text-color"}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){t.$emit("input",null)}}},[a("i",{staticClass:"fa fa-close"})])]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"text-color"}},[t._v("Reset Image")]),a("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.clearImage}},[a("i",{staticClass:"fa fa-trash"})])]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2 card"},[a("label",{attrs:{for:"text-color"}},[t._v("Save Image")]),a("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.saveCanvasAsImage}},[a("i",{staticClass:"fa fa-save"})])])],2),a("div",{staticClass:"image-editor-wrapper"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-1 col-md-2"},[a("div",{staticClass:"image-editor-toolbar bar-bg d-flex flex-md-column align-items-md-center align-items-center justify-content-around"},[a("EditorShape",{attrs:{shape:"circle",icon:"genderless"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"line",icon:"ellipsis-v"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"pen",icon:"pencil"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"text",icon:"font"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"arrow",icon:"long-arrow-down"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}})],1)]),a("div",{staticClass:"col-lg-9 col-md-10"},[a("div",{staticClass:"image-editor-canvas"},[a("canvas",{ref:"canvas",attrs:{width:"800",height:"800"},on:{mousemove:t.onDragging,mouseup:t.onDragStop,mousedown:t.onDragStart,"&touchmove":function(e){return t.onDragging(e)},touchend:t.onDragStop,"&touchstart":function(e){return t.onDragStart(e)}}}),a("div",{ref:"canvas_text",staticClass:"canvas-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.canvas_text,expression:"canvas_text"}],style:{color:t.controls.textColor,fontSize:t.controls.fontSize+"px",borderColor:t.controls.strokeColor,backgroundColor:t.controls.fillBox?t.controls.fillColor:"transparent"},attrs:{width:"0"},domProps:{value:t.canvas_text},on:{blur:t.saveCanvasText,input:function(e){e.target.composing||(t.canvas_text=e.target.value)}}})])])]),t.shapesStack.dataStore.length?a("div",{staticClass:"col-lg-2"},[a("div",{attrs:{id:"accordion"}},[t.listShapesALayer("text").length?a("LayerText",{attrs:{value:t.listShapesALayer("text")},on:{onDelete:t.deleteShape,textUpdated:t.textUpdated}}):t._e(),t.listShapesALayer("line").length?a("LayerLine",{attrs:{value:t.listShapesALayer("line")},on:{onDelete:t.deleteShape}}):t._e(),t.listShapesALayer("circle").length?a("LayerCircle",{attrs:{value:t.listShapesALayer("circle")},on:{onDelete:t.deleteShape}}):t._e(),t.listShapesALayer("arrow").length?a("LayerArrow",{attrs:{value:t.listShapesALayer("arrow")},on:{onDelete:t.deleteShape}}):t._e()],1)]):t._e()])])])])}),u=[],h=(a("Z2Ku"),a("L9s1"),a("iv4g")),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-shape d-flex flex-column w-100",class:{active:t.shape===t.value},on:{click:function(e){t.$emit("input",t.shape)}}},[a("i",{class:"fa fa-"+t.icon}),a("div",{staticClass:"text-capitalize"},[t._v(t._s(t.shape))])])},f=[],v={props:{shape:{type:String},icon:{type:String},value:{}}},m=v,g=a("KHd+"),x=Object(g["a"])(m,p,f,!1,null,null,null),C=x.exports;function y(t,e){var a=Math.sqrt(Math.pow(t.from.x-t.to.x,2)+Math.pow(t.from.y-t.to.y,2));e.beginPath(),e.arc(t.from.x,t.from.y,a,0,2*Math.PI,!1),e.stroke()}a("bHtr");function S(t,e){var a=10,s=Math.atan2(t.to.y-t.from.y,t.to.x-t.from.x);e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.stroke(),e.beginPath(),e.moveTo(t.to.x,t.to.y),e.lineTo(t.to.x-a*Math.cos(s-Math.PI/7),t.to.y-a*Math.sin(s-Math.PI/7)),e.lineTo(t.to.x-a*Math.cos(s+Math.PI/7),t.to.y-a*Math.sin(s+Math.PI/7)),e.lineTo(t.to.x,t.to.y),e.lineTo(t.to.x-a*Math.cos(s-Math.PI/7),t.to.y-a*Math.sin(s-Math.PI/7)),e.stroke(),e.fill()}function b(t,e){e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.lineWidth=t.lineWidth,e.strokeStyle=t.strokeColor,e.stroke()}a("KKXr");var k=27,w=function(t,e){var a=e.getCanvasCoordinates(t.toEvent).y-e.getCanvasCoordinates(t.fromEvent).y,s=e.getCanvasCoordinates(t.toEvent).x-e.getCanvasCoordinates(t.fromEvent).x,n=e.$refs.canvas_text;n.style.height="".concat(Math.abs(a),"px"),n.style.width="".concat(Math.abs(s),"px"),n.querySelector("textarea").focus(),n.querySelector("textarea").style.lineHeight=k<2?k:"".concat(k,"px")},_=function(t,e,a){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=t.text.split("\n");e.fillStyle=a.controls.textColor,e.textBaseline="top",e.font="".concat(t.fontSize,"px 'Avenir', Helvetica, Arial, sans-serif");for(var o=0;o<n.length;o++){for(var i=n[o].split(" "),r="",l=0;l<i.length;l++){var c="".concat(r+i[l]," "),d=e.measureText(c),u=d.width;u>t.maxWidth&&l>0?(e.fillText(r,t.x,t.y),r="".concat(i[l]," "),t.y+=t.lineHeight):r=c}e.fillText(r,t.x,t.y+o*t.lineHeight)}s&&a.push(t)},$=function(t,e,a){var s=a.$refs.canvas_text;if(a.canvas_text){var n=t.from;_({text:a.canvas_text,textColor:a.controls.textColor,fontSize:a.controls.fontSize,x:n.x,y:n.y,lineHeight:k,maxWidth:s.clientWidth,type:"text",timestamp:Date.now()},e,a)}s.style.display="none",a.canvas_text=null},T=function(t,e){_(t,e.ctx,e,!1)},E=function(t){t.$nextTick(function(){var e=t.$refs.canvas_text;t.canvas_text="",e.style.display="block",e.style.width=0,e.style.left="".concat(t.dragStartLocation.x,"px"),e.style.top="".concat(t.dragStartLocation.y,"px"),e.addEventListener("mouseup",function(){t.dragging=!1})})},L={lastX:null,lastY:null,lineStart:!0,drawPen:function(t,e){L.lineStart&&(L.lastX=t.from.x,L.lastY=t.from.y,L.lineStart=!1,e.beginPath()),e.lineTo(L.lastX,L.lastY),e.lineTo(t.to.x,t.to.y),e.stroke(),L.lastX=t.to.x,L.lastY=t.to.y}},P=L,I=function(t){return function(e){console.log(e.type),t.checkIsTouchEvent(e),t.dragStartLocationEvent=e,t.dragStartLocation=null,t.dragStartLocation?t.$nextTick(function(){t.dragStartLocation=t.getCanvasCoordinates(e)}):t.dragStartLocation=t.getCanvasCoordinates(e),t.dragging=!0,t.takeSnapshot()}},D=I,O=function(t,e){return function(a){var s=t.getCanvasCoordinates(a),n=t.dragStartLocation;t.dragging=!1,t.draw(a);var o={type:t.controls.shape,from:n,to:s,strokeColor:t.controls.strokeColor,lineWidth:t.controls.lineWidth,timestamp:Date.now()};"text"===t.controls.shape?t.$refs.canvas_text.focus():"pen"===t.controls.shape&&(e.lineStart=!0,e.lastX=null,e.lastY=null),"text"!==t.controls.shape&&"pen"!==t.controls.shape&&t.push(o)}},j=O,M=function(t){return function(e){t.dragging&&t.draw(e)}},A=M,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},t._l(t.textProps,function(e){return a("LayerTextElement",{key:e.timestamp,attrs:{value:e},on:{onDelete:function(e){t.$emit("onDelete",e)},input:t.onTextUpdated}})}))])]):t._e()},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",attrs:{id:"text"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link",attrs:{"data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[a("i",{staticClass:"fa fa-font"}),t._v(" text\n      ")])])])}],z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between"},[a("div",[a("i",{staticClass:"fa fa-trash mr-2",on:{click:function(e){t.$emit("onDelete",t.value.timestamp)}}}),t.isEdit?a("i",{staticClass:"fa fa-check",on:{click:function(e){t.isEdit=!1}}}):a("i",{staticClass:"fa fa-edit",on:{click:t.showEdit}})]),t.isEdit?a("input",{ref:"editText",staticStyle:{width:"140px"},attrs:{type:"text"},domProps:{value:t.value.text},on:{change:t.saveText}}):a("span",[t._v(t._s(t.value.text))]),a("span",{staticClass:"d-inline-block",style:"background-color:"+t.value.textColor+"; width: 15px; height: 15px; border-radius: 50%"})])},B=[],Y=a("yT7P"),U={props:{value:{}},data:function(){return{isEdit:!1}},methods:{showEdit:function(){this.isEdit=!0,this.$nextTick(function(){this.$refs.editText.focus()})},saveText:function(t){var e=Object(Y["a"])({},this.value);e.text=t.target.value,this.$emit("input",e)}}},X=U,H=Object(g["a"])(X,z,B,!1,null,null,null),K=H.exports,q={components:{LayerTextElement:K},props:{value:{type:Array}},data:function(){return{textProps:Object(h["a"])(this.value)}},updated:function(){},methods:{onTextUpdated:function(t){var e=this.textProps.findIndex(function(e){return e.timestamp===t.timestamp});this.textProps.splice(e,1,t),this.$emit("textUpdated",t)}},watch:{value:function(t,e){this.textProps=t}}},N=q,Z=Object(g["a"])(N,R,W,!1,null,null,null),J=Z.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"card my-4"},[t._m(0),a("div",{staticClass:"collapse show",attrs:{id:"line","aria-labelledby":"headingOne","data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled"},t._l(t.value,function(e){return a("li",{key:e.timestamps,staticClass:"d-flex justify-content-between my-3"},[a("i",{staticClass:"fa fa-trash",on:{click:function(a){t.$emit("onDelete",e.timestamp)}}}),a("span",{staticClass:"d-inline-block",staticStyle:{"border-radius":"10px",width:"70px",height:"10px"},style:"background-color: "+e.strokeColor})])}))])])]):t._e()},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",attrs:{id:"text"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link",attrs:{"data-toggle":"collapse","data-target":"#line","aria-expanded":"true","aria-controls":"collapseOne"}},[a("i",{staticClass:"fa fa-ellipsis-v"}),t._v(" Lines\n      ")])])])}],Q={props:{value:{}}},G=Q,tt=Object(g["a"])(G,V,F,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"card my-4"},[t._m(0),a("div",{staticClass:"collapse show",attrs:{id:"circle","aria-labelledby":"headingOne","data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled"},t._l(t.value,function(e){return a("li",{key:e.timestamps,staticClass:"d-flex justify-content-between my-3"},[a("i",{staticClass:"fa fa-trash",on:{click:function(a){t.$emit("onDelete",e.timestamp)}}}),a("span",{staticClass:"d-inline-block",staticStyle:{"border-radius":"50%",width:"30px",height:"30px"},style:"border: solid 6px "+e.strokeColor})])}))])])]):t._e()},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",attrs:{id:"text"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link",attrs:{"data-toggle":"collapse","data-target":"#circle","aria-expanded":"true","aria-controls":"collapseOne"}},[a("i",{staticClass:"fa fa-genderless"}),t._v(" circle\n      ")])])])}],nt={props:{value:{}}},ot=nt,it=Object(g["a"])(ot,at,st,!1,null,null,null),rt=it.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.value?a("div",{staticClass:"card my-4"},[t._m(0),a("div",{staticClass:"collapse show",attrs:{id:"arrow","aria-labelledby":"headingOne","data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled"},t._l(t.value,function(e){return a("li",{key:e.timestamps,staticClass:"d-flex justify-content-between my-1"},[a("i",{staticClass:"fa fa-trash",on:{click:function(a){t.$emit("onDelete",e.timestamp)}}}),a("i",{staticClass:"fa fa-long-arrow-left",staticStyle:{"font-size":"30px","font-weight":"bold"},style:"color: "+e.strokeColor})])}))])])]):t._e()},ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",attrs:{id:"text"}},[a("h5",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link",attrs:{"data-toggle":"collapse","data-target":"#arrow","aria-expanded":"true","aria-controls":"collapseOne"}},[a("i",{staticClass:"fa fa-long-arrow-down"}),t._v(" Arrows\n      ")])])])}],dt={props:{value:{}}},ut=dt,ht=Object(g["a"])(ut,lt,ct,!1,null,null,null),pt=ht.exports,ft={components:{EditorShape:C,LayerText:J,LayerLine:et,LayerCircle:rt,LayerArrow:pt},props:{value:{}},data:function(){return{canvas:null,ctx:null,dragging:!1,snapshot:null,dragStartLocation:null,dragStartLocationEvent:null,canvas_text:null,controls:{fillBox:!1,shape:"text",lineWidth:6,strokeColor:"#800080",fillColor:"#800080",textColor:"#800080",fontSize:40},shapesStack:{dataStore:[],redoStackDataStore:[],holderDataStore:[]},isOnMobile:!1}},computed:{imageSizes:function(){var t=new Image;return t.src=this.value.src,{widt:t.width,hegh:t.height}},undoBtnActivation:function(){return!!this.shapesStack.dataStore.length||!!this.shapesStack.holderDataStore.length}},mounted:function(){(function(t){t.init(),window.addEventListener("keyup",t.ctrlZ)})(this)},methods:{ctrlZ:function(t){90==t.keyCode&&t.ctrlKey&&16===t.keyCode?this.redoShapes():90==t.keyCode&&t.ctrlKey&&(this.undoShapes(),console.log(":redo"))},reRenderShapes:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this,e=t.shapesStack.dataStore;this.initCanvasBg(function(){for(var a=0;a<e.length;a++){var s=e[a];switch(s.type){case"text":T(s,t);break;case"line":b(s,t.ctx);break;case"circle":y(s,t.ctx);break;case"arrow":S(s,t.ctx);break}}})},init:function(){this.canvas=this.$refs.canvas,this.canvas.style.width="100%",this.canvas.width=this.canvas.offsetWidth,this.ctx=this.canvas.getContext("2d");document.querySelector(".image-editor-canvas");this.ctx.strokeStyle=this.controls.strokeColor,this.ctx.fillStyle=this.controls.fillColor,this.ctx.lineWidth=this.controls.lineWidth,this.ctx.ClipToBounds=!0,this.ctx.lineCap="round",this.initCanvasBg()},listShapesALayer:function(t){var e=this.shapesStack.dataStore.filter(function(e){return e.type===t});return e},deleteShape:function(t){var e=this.shapesStack.dataStore.findIndex(function(e){return e.timestamp===t});this.shapesStack.holderDataStore.push(this.shapesStack.dataStore[e]),this.$set(this.shapesStack.dataStore[e],"isDeleted",!0),this.shapesStack.dataStore.splice(e,1),this.reRenderShapes()},textUpdated:function(t){var e=this.shapesStack.dataStore.findIndex(function(e){return e.timestamp===t.timestamp});this.shapesStack.holderDataStore.push(this.shapesStack.dataStore[e]),this.shapesStack.dataStore.splice(e,1),this.push(t),this.reRenderShapes()},initCanvasBg:function(t){var e=this,a=new Image;a.src=this.value.src,a.onload=function(){e.ctx.drawImage(a,0,0,e.canvas.width,e.canvas.height),t&&t(!0)}},takeSnapshot:function(){this.snapshot=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},getSnapshot:function(){this.ctx.putImageData(this.snapshot,0,0)},clearImage:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.initCanvasBg(),this.shapesStack.holderDataStore=Object(h["a"])(this.shapesStack.dataStore),this.shapesStack.dataStore=[]},getCanvasCoordinatesMouse:function(t){var e=t.clientX-this.canvas.getBoundingClientRect().left,a=t.clientY-this.canvas.getBoundingClientRect().top;return{x:e,y:a}},getCanvasCoordinates:function(t){return this.isOnMobile?this.getCanvasCoordinatesTouch(t):this.getCanvasCoordinatesMouse(t)},getCanvasCoordinatesTouch:function(t){var e=t.targetTouches[0]?t.targetTouches[0].pageX:t.changedTouches[t.changedTouches.length-1].pageX,a=t.targetTouches[0]?t.targetTouches[0].pageY:t.changedTouches[t.changedTouches.length-1].pageY,s=e-this.canvas.getBoundingClientRect().left,n=a-this.canvas.getBoundingClientRect().top;return t.preventDefault(),{x:s,y:n}},onDragStart:function(t){return"text"===this.controls.shape&&E(this),D(this)(t)},onDragging:function(t){return A(this)(t)},onDragStop:function(t){return j(this,P)(t)},draw:function(t){var e=this,a=this.getCanvasCoordinates(t);switch(this.getSnapshot(),this.controls.shape){case"line":b({type:this.controls.shape,from:this.dragStartLocation,to:a,strokeColor:this.controls.strokeColor,lineWidth:this.controls.lineWidth},this.ctx);break;case"circle":y({from:this.dragStartLocation,to:a},this.ctx);break;case"pen":P.drawPen({to:a,from:this.dragStartLocation},this.ctx);break;case"text":this.$nextTick(function(){w({fromEvent:e.dragStartLocationEvent,toEvent:t},e)});break;case"arrow":S({from:this.dragStartLocation,to:a},this.ctx);break}},checkIsTouchEvent:function(t){return t.type.includes("touch")?(this.isOnMobile=!0,!0):(this.isOnMobile=!1,!1)},saveCanvasAsImage:function(){var t=this,e=this.canvas.toDataURL("image/png");this.$nextTick(function(){t.$emit("input",{src:e,key:t.value.key})})},saveCanvasText:function(t){return $({from:this.dragStartLocation},this.ctx,this)},push:function(t){this.shapesStack.dataStore.push(t)},pop:function(){var t=this.shapesStack.dataStore.pop();return t},redoPush:function(t){this.shapesStack.redoStackDataStore.push(t)},redoPop:function(){var t=this.shapesStack.redoStackDataStore.pop();return t},undoShapes:function(){if(this.shapesStack.holderDataStore.length){var t=this.shapesStack.holderDataStore.pop();if("text"===t.type&&!t.isDeleted){var e=this.pop();this.redoPush(e)}this.push(t),this.reRenderShapes()}else if(this.shapesStack.dataStore.length){var a=this.pop();if(!a)return;this.redoPush(a),this.reRenderShapes()}},redoShapes:function(){if(this.shapesStack.redoStackDataStore.length){var t=this.redoPop();this.push(t),this.reRenderShapes("redo")}}},watch:{"controls.lineWidth":function(t,e){this.ctx.lineWidth=t},"controls.strokeColor":function(t,e){this.ctx.strokeStyle=t,this.ctx.fillStyle=t},"controls.shape":function(t,e){this.$refs.canvas_text.style.display="none"}}},vt=ft,mt=Object(g["a"])(vt,d,u,!1,null,null,null),gt=mt.exports,xt={components:{ImageEditor:gt},data:function(){return{imagesPreview:[],selectedImage:null}},methods:{onChange:function(){var t=this,e=this.$refs.uploader.files||this.$refs.uploader_2.files;if(e&&e.length)for(var a=function(a){var s=e[a];if(!s.type.match("image/*"))return alert("".concat(s.name," must be an image")),"continue";var n=new FileReader;n.onload=function(e){t.imagesPreview.push({src:e.target.result,key:Date.now()+a})},n.readAsDataURL(s)},s=0;s<e.length;s++)a(s);else alert("no images...")},removeImage:function(t){this.imagesPreview.splice(t,1)},editImage:function(t){this.selectedImage=t},imageEdited:function(t){if(t){var e=this.imagesPreview.findIndex(function(e){return e.key===t.key});this.imagesPreview[e].src=t.src,this.selectedImage=null}}}},Ct=xt,yt=Object(g["a"])(Ct,l,c,!1,null,null,null),St=yt.exports,bt={name:"app",components:{UploadImage:St}},kt=bt,wt=(a("ZL7j"),Object(g["a"])(kt,i,r,!1,null,null,null)),_t=wt.exports;a("qJvR");window.$=o.a,window.jQuery=o.a,s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(_t)}}).$mount("#app")},ZL7j:function(t,e,a){"use strict";var s=a("slcd"),n=a.n(s);n.a},qJvR:function(t,e,a){},slcd:function(t,e,a){}});
//# sourceMappingURL=app.6360b7d7.js.map