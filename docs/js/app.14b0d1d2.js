(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],u=0,d=[];u<r.length;u++)s=r[u],a[s]&&d.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,r=1;r<o.length;r++){var l=o[r];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},a={1:0},i=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-image-drawer-component/docs/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var h=l;i.push([4,0]),o()})({4:function(t,e,o){t.exports=o("Vtdi")},AfVj:function(t,e,o){},Vtdi:function(t,e,o){"use strict";o.r(e);o("VRzm");var n=o("Kw5r"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("UploadImage")],1)},i=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"image-upload-wrapper"},[o("div",{staticClass:"image-upload-field"},[o("input",{ref:"uploader",attrs:{type:"file",multiple:""},on:{change:t.onChange}}),t.imagesPreview.length?t._e():o("div",{staticClass:"upload-image-placeholder"},[t._v("\n          Upload your images\n      ")]),o("div",[o("transition-group",{staticClass:"image-upload-preview",attrs:{name:"slide",mode:"out-in",tag:"div"}},[t._l(t.imagesPreview,function(e,n){return o("div",{key:e.key,staticClass:"img-item",style:{"background-image":"url("+e.src+")"}},[o("i",{staticClass:"material-icons action-icon removeImageIcon",on:{click:function(e){t.removeImage(n)}}},[t._v("close")]),o("i",{staticClass:"material-icons action-icon editImageIcon",on:{click:function(o){t.editImage(e.src)}}},[t._v("edit")])])}),t.imagesPreview.length?o("div",{key:"ccc",staticClass:"img-item"},[o("i",{staticClass:"material-icons"},[t._v("photos")]),t._v("\n           upload ur image\n         ")]):t._e()],2)],1)]),t.selectedImage?o("ImageEditor",{model:{value:t.selectedImage,callback:function(e){t.selectedImage=e},expression:"selectedImage"}}):t._e()],1)},r=[],l=(o("f3/d"),o("SRfc"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"image-editor"},[o("button",{on:{click:function(e){t.$emit("input",null)}}},[t._v("close")]),o("button",{on:{click:t.clearImage}},[t._v("clear image")]),o("div",{staticClass:"image-editor-wrapper"},[o("div",{staticClass:"image-editor-toolbar"},[o("ul",[o("li",[o("label",{attrs:{for:""}},[t._v("fill Box")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.fillBox,expression:"controls.fillBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.controls.fillBox)?t._i(t.controls.fillBox,null)>-1:t.controls.fillBox},on:{change:function(e){var o=t.controls.fillBox,n=e.target,a=!!n.checked;if(Array.isArray(o)){var i=null,s=t._i(o,i);n.checked?s<0&&t.$set(t.controls,"fillBox",o.concat([i])):s>-1&&t.$set(t.controls,"fillBox",o.slice(0,s).concat(o.slice(s+1)))}else t.$set(t.controls,"fillBox",a)}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("Circle  ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.shape,expression:"controls.shape"}],attrs:{type:"radio",value:"circle",name:"shape"},domProps:{checked:t._q(t.controls.shape,"circle")},on:{change:function(e){t.$set(t.controls,"shape","circle")}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("Line")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.shape,expression:"controls.shape"}],attrs:{type:"radio",value:"line",name:"shape"},domProps:{checked:t._q(t.controls.shape,"line")},on:{change:function(e){t.$set(t.controls,"shape","line")}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("Arrow")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.shape,expression:"controls.shape"}],attrs:{type:"radio",value:"arrow",name:"shape"},domProps:{checked:t._q(t.controls.shape,"arrow")},on:{change:function(e){t.$set(t.controls,"shape","arrow")}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("Text")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.shape,expression:"controls.shape"}],attrs:{type:"radio",value:"text",name:"shape"},domProps:{checked:t._q(t.controls.shape,"text")},on:{change:function(e){t.$set(t.controls,"shape","text")}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("Line width")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.lineWidth,expression:"controls.lineWidth"}],attrs:{type:"range",min:1,max:50},domProps:{value:t.controls.lineWidth},on:{__r:function(e){t.$set(t.controls,"lineWidth",e.target.value)}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("fill color")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.fillColor,expression:"controls.fillColor"}],attrs:{type:"color"},domProps:{value:t.controls.fillColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"fillColor",e.target.value)}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("stroke color")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.strokeColor,expression:"controls.strokeColor"}],attrs:{type:"color"},domProps:{value:t.controls.strokeColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"strokeColor",e.target.value)}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("text color")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.textColor,expression:"controls.textColor"}],attrs:{type:"color"},domProps:{value:t.controls.textColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"textColor",e.target.value)}}})]),o("li",[o("label",{attrs:{for:""}},[t._v("Font size")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.fontSize,expression:"controls.fontSize"}],attrs:{type:"range",min:1,max:50},domProps:{value:t.controls.fontSize},on:{__r:function(e){t.$set(t.controls,"fontSize",e.target.value)}}})])])]),o("div",{staticClass:"image-editor-canvas"},[o("canvas",{ref:"canvas",attrs:{width:t.imageSizes.widt,height:t.imageSizes.hegh},on:{mousemove:t.onDragging,mouseup:t.onDragStop,mousedown:t.onDragStart}}),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.canvas_text,expression:"canvas_text"}],ref:"canvas_text",style:{color:t.controls.textColor,fontSize:t.controls.fontSize+"px",borderColor:t.controls.strokeColor,backgroundColor:t.controls.fillBox?t.controls.fillColor:"transparent"},attrs:{width:"0"},domProps:{value:t.canvas_text},on:{blur:t.saveCanvasText,input:function(e){e.target.composing||(t.canvas_text=e.target.value)}}})])])])}),c=[],h=(o("bHtr"),{props:{value:{type:String}},data:function(){return{canvas:null,ctx:null,dragging:!1,snapshot:null,dragStartLocation:null,dragStartLocationEvent:null,canvas_text:null,controls:{fillBox:!1,shape:"line",lineWidth:6,strokeColor:"#800080",fillColor:"#800080",textColor:"#800080",fontSize:14}}},computed:{imageSizes:function(){var t=new Image;return t.src=this.value,{widt:t.width,hegh:t.height}}},mounted:function(){(function(t){t.init()})(this)},methods:{init:function(){var t=this;console.log("init method"),this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.ctx.strokeStyle=this.controls.strokeColor,this.ctx.fillStyle=this.controls.fillColor,this.ctx.lineWidth=this.controls.lineWidth,this.ctx.lineCap="round";var e=new Image;e.src=this.value,e.onload=function(){console.log("image loaded"),t.ctx.drawImage(e,0,0)}},onDragging:function(t){console.log("dragging"),this.dragging&&this.draw(t)},onDragStart:function(t){if(console.log("drag start"),this.dragging=!0,this.takeSnapshot(),this.dragStartLocation=this.getCanvasCoordinates(t),"text"===this.controls.shape){var e=this.$refs.canvas_text;e.value=null,e.style.display="block",e.style.width=0,e.style.left=t.clientX+"px",e.style.top=t.clientY+"px",this.dragStartLocationEvent=t;var o=this;e.addEventListener("mouseup",function(){o.dragging=!1})}},onDragStop:function(t){console.log("drag stop"),this.dragging=!1,this.draw(t)},drawLine:function(t){this.ctx.beginPath(),this.ctx.moveTo(this.dragStartLocation.x,this.dragStartLocation.y),this.ctx.lineTo(t.x,t.y),this.ctx.stroke()},drawCircle:function(t){var e=Math.sqrt(Math.pow(this.dragStartLocation.x-t.x,2)+Math.pow(this.dragStartLocation.y-t.y,2));this.ctx.beginPath(),this.ctx.arc(this.dragStartLocation.x,this.dragStartLocation.y,e,0,2*Math.PI,!1),this.controls.fillBox?this.ctx.fill():this.ctx.stroke()},drawText:function(t,e){var o=e.clientY-this.dragStartLocationEvent.clientY,n=e.clientX-this.dragStartLocationEvent.clientX,a=this.$refs.canvas_text;a.style.height=Math.abs(o)+"px",a.style.width=Math.abs(n)+"px"},drawArrow:function(t){var e=Math.atan2(t.y-this.dragStartLocation.y,t.x-this.dragStartLocation.y);this.ctx.lineTo(t.x,t.y),this.ctx.moveTo(t.x-5*this.controls.linewidth*Math.cos(e+Math.PI/6),t.y-5*self.linewidth*Math.sin(e+Math.PI/6)),this.ctx.lineTo(t.x,t.y),this.ctx.lineTo(t.x-5*this.controls.linewidth*Math.cos(e-Math.PI/6),t.y-5*this.controls.linewidth*Math.sin(e-Math.PI/6)),this.ctx.stroke()},getCanvasCoordinates:function(t){var e=t.clientX-this.canvas.getBoundingClientRect().left,o=t.clientY-this.canvas.getBoundingClientRect().top;return{x:e,y:o}},draw:function(t){var e=this.getCanvasCoordinates(t);switch(this.getSnapshot(),this.controls.shape){case"line":this.drawLine(e);break;case"circle":this.drawCircle(e);break;case"text":this.drawText(e,t);break;case"arrow":this.drawArrow(e);break}},takeSnapshot:function(){this.snapshot=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},getSnapshot:function(){this.ctx.putImageData(this.snapshot,0,0)},clearImage:function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var e=new Image;e.src=this.value,e.onload=function(){console.log("image loaded"),t.ctx.drawImage(e,0,0)}},saveCanvasText:function(t){var e=this;this.$refs.canvas_text;if(console.log(this.canvas_text),this.canvas_text){console.log(12,this.canvas_text),this.ctx.fillStyle=this.controls.textColor,this.ctx.font="".concat(this.controls.fontSize,"px serif");var o=this.getCanvasCoordinates({clientX:t.target.offsetLeft+t.target.clientWidth,clientY:t.target.offsetTop});console.log(t),this.ctx.fillText(this.canvas_text,o.x,o.y),this.canvas_text=null,this.$nextTick(function(){e.ctx.fillStyle=e.controls.fillColor})}}},watch:{"controls.lineWidth":function(t,e){this.ctx.lineWidth=t},"controls.strokeColor":function(t,e){this.ctx.strokeStyle=t,console.log("strokeColor",t)},"controls.fillColor":function(t,e){console.log("fillColor",t),this.ctx.fillStyle=t},"controls.shape":function(t,e){this.$refs.canvas_text.style.display="none"}}}),u=h,d=o("KHd+"),g=Object(d["a"])(u,l,c,!1,null,null,null),v=g.exports,f={components:{ImageEditor:v},data:function(){return{imagesPreview:[],selectedImage:null}},methods:{onChange:function(){var t=this;console.log(this.$refs.uploader.files);var e=this.$refs.uploader.files;if(console.log("start uploading"),e.length)for(var o=function(o){var n=e[o];if(!n.type.match("image/*"))return console.log("".concat(n.name," must be an image")),"continue";var a=new FileReader;a.onload=function(e){t.imagesPreview.push({src:e.target.result,key:Date.now()+o})},a.readAsDataURL(n)},n=0;n<e.length;n++)o(n);else console.log("no images...")},removeImage:function(t){this.imagesPreview.splice(t,1)},editImage:function(t){this.selectedImage=t}}},p=f,m=(o("feCi"),Object(d["a"])(p,s,r,!1,null,null,null)),x=m.exports,w={name:"app",components:{UploadImage:x}},y=w,C=(o("ZL7j"),Object(d["a"])(y,a,i,!1,null,null,null)),_=C.exports;o("qJvR");n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(_)}}).$mount("#app")},ZL7j:function(t,e,o){"use strict";var n=o("slcd"),a=o.n(n);a.a},feCi:function(t,e,o){"use strict";var n=o("AfVj"),a=o.n(n);a.a},qJvR:function(t,e,o){},slcd:function(t,e,o){}});
//# sourceMappingURL=app.14b0d1d2.js.map