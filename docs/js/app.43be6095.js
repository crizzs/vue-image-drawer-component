(function(t){function e(e){for(var o,i,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)i=r[p],s[i]&&d.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);h&&h(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},s={1:0},n=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-image-drawer-component/docs/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var h=l;n.push([2,0]),a()})({2:function(t,e,a){t.exports=a("Vtdi")},Vtdi:function(t,e,a){"use strict";a.r(e);a("VRzm");var o=a("Kw5r"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("UploadImage")],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-upload-wrapper"},[a("div",{staticClass:"image-upload-field"},[a("input",{ref:"uploader",attrs:{type:"file",multiple:""},on:{change:t.onChange}}),t.imagesPreview.length?t._e():a("div",{staticClass:"upload-image-placeholder"},[t._v("\n           Click / drag and drop images here\n      ")]),a("div",[a("transition-group",{staticClass:"image-upload-preview",attrs:{name:"slide",mode:"out-in",tag:"div"}},[t._l(t.imagesPreview,function(e,o){return a("div",{key:e.key,staticClass:"img-item",style:{"background-image":"url("+e.src+")"}},[a("i",{staticClass:"fa fa-close action-icon removeImageIcon",on:{click:function(e){t.removeImage(o)}}}),a("i",{staticClass:"fa fa-edit action-icon editImageIcon",on:{click:function(a){t.editImage(e)}}})])}),t.imagesPreview.length?a("div",{key:"ccc",staticClass:"img-item upload-card"},[a("input",{ref:"uploader_2",attrs:{type:"file",multiple:""},on:{change:t.onChange}}),t._v("\n           Click / drag and drop images here\n         ")]):t._e()],2)],1)]),t.selectedImage?a("ImageEditor",{on:{input:t.imageEdited},model:{value:t.selectedImage,callback:function(e){t.selectedImage=e},expression:"selectedImage"}}):t._e()],1)},r=[],l=(a("INYr"),a("f3/d"),a("SRfc"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-editor"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"edit-shape d-flex text-center my-3 text-capitalize"},["text"!==t.controls.shape?[a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2"},[a("label",{attrs:{for:"line-width"}},[t._v("Line width")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.lineWidth,expression:"controls.lineWidth"}],attrs:{type:"range",id:"line-width",min:1,max:50},domProps:{value:t.controls.lineWidth},on:{__r:function(e){t.$set(t.controls,"lineWidth",e.target.value)}}})]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2"},[a("label",{attrs:{for:"stroke-color"}},[t._v("stroke color")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.strokeColor,expression:"controls.strokeColor"}],attrs:{type:"color",id:"stroke-color"},domProps:{value:t.controls.strokeColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"strokeColor",e.target.value)}}})])]:[a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2"},[a("label",{attrs:{for:"font-size"}},[t._v("Font size")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.fontSize,expression:"controls.fontSize"}],attrs:{type:"range",id:"font-size",min:1,max:50},domProps:{value:t.controls.fontSize},on:{__r:function(e){t.$set(t.controls,"fontSize",e.target.value)}}})]),a("div",{staticClass:"d-flex flex-column align-items-center border mb-2 p-2"},[a("label",{attrs:{for:"text-color"}},[t._v("text color")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.controls.textColor,expression:"controls.textColor"}],attrs:{type:"color",id:"text-color"},domProps:{value:t.controls.textColor},on:{input:function(e){e.target.composing||t.$set(t.controls,"textColor",e.target.value)}}})])]],2),a("div",{staticClass:"mb-2"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.$emit("input",null)}}},[t._v("close")]),a("button",{staticClass:"btn btn-primary mx-3",on:{click:t.clearImage}},[t._v("clear image")]),a("button",{staticClass:"btn btn-primary",on:{click:t.saveCanvasAsImage}},[t._v("save changes")])]),a("div",{staticClass:"image-editor-wrapper"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"image-editor-toolbar bar-bg"},[a("EditorShape",{attrs:{shape:"circle",icon:"genderless"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"line",icon:"ellipsis-v"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"pen",icon:"pencil"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"text",icon:"font"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"arrow",icon:"long-arrow-down"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}})],1)]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"image-editor-canvas"},[a("canvas",{ref:"canvas",attrs:{width:"800",height:"800"},on:{mousemove:t.onDragging,mouseup:t.onDragStop,mousedown:t.onDragStart}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.canvas_text,expression:"canvas_text"}],ref:"canvas_text",style:{color:t.controls.textColor,fontSize:t.controls.fontSize+"px",borderColor:t.controls.strokeColor,backgroundColor:t.controls.fillBox?t.controls.fillColor:"transparent"},attrs:{width:"0"},domProps:{value:t.canvas_text},on:{blur:t.saveCanvasText,input:function(e){e.target.composing||(t.canvas_text=e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"image-editor-toolbar bar-bg"},[a("EditorShape",{attrs:{shape:"circle",icon:"genderless"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"line",icon:"ellipsis-v"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"pen",icon:"pencil"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"text",icon:"font"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}}),a("EditorShape",{attrs:{shape:"arrow",icon:"long-arrow-down"},model:{value:t.controls.shape,callback:function(e){t.$set(t.controls,"shape",e)},expression:"controls.shape"}})],1)])])])])])}),c=[],h=(a("KKXr"),a("bHtr"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-shape d-flex flex-column",class:{active:t.shape===t.value},on:{click:function(e){t.$emit("input",t.shape)}}},[a("i",{class:"fa fa-"+t.icon}),a("div",{staticClass:"text-capitalize"},[t._v(t._s(t.shape))])])}),p=[],d={props:{shape:{type:String},icon:{type:String},value:{}}},u=d,v=a("KHd+"),f=Object(v["a"])(u,h,p,!1,null,null,null),g=f.exports;function m(){this.dataStore=[],this.top=0}m.prototype.push=function(t){this.dataStore[this.top++]=t},m.prototype.pop=function(){var t=this.top?this.dataStore.splice(--this.top,1):void 0;return t},m.prototype.peek=function(){return this.dataStore[this.top-1]},m.prototype.clear=function(){this.top=0},m.prototype.length=function(){return this.top};var x=new m,C={components:{EditorShape:g},props:{value:{}},data:function(){return{canvas:null,ctx:null,dragging:!1,snapshot:null,dragStartLocation:null,dragStartLocationEvent:null,canvas_text:null,controls:{fillBox:!1,shape:"line",lineWidth:6,strokeColor:"#800080",fillColor:"#800080",textColor:"#800080",fontSize:14},pen:{lastX:null,lastY:null,lineStart:!0}}},computed:{imageSizes:function(){var t=new Image;return t.src=this.value.src,{widt:t.width,hegh:t.height}}},mounted:function(){(function(t){t.init(),window.addEventListener("keyup",t.ctrlZ)})(this)},methods:{ctrlZ:function(t){var e=this;90==t.keyCode&&t.ctrlKey&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),x.pop(),this.initCanvasBg(function(){for(var t=0;t<x.length();t++)e.drawLine(x.dataStore[t],e.ctx)}))},init:function(){this.canvas=this.$refs.canvas,this.canvas.style.width="100%",this.canvas.width=this.canvas.offsetWidth,this.ctx=this.canvas.getContext("2d");document.querySelector(".image-editor-canvas");this.ctx.strokeStyle=this.controls.strokeColor,this.ctx.fillStyle=this.controls.fillColor,this.ctx.lineWidth=this.controls.lineWidth,this.ctx.ClipToBounds=!0,this.ctx.lineCap="round",this.initCanvasBg()},initCanvasBg:function(t){var e=this,a=new Image;a.src=this.value.src,a.onload=function(){e.ctx.drawImage(a,0,0,e.canvas.width,e.canvas.height),t&&t(!0)}},onDragging:function(t){this.dragging&&this.draw(t)},onDragStart:function(t){var e=this;this.dragStartLocationEvent=t,this.dragStartLocation=this.getCanvasCoordinates(t),this.dragging=!0,this.takeSnapshot(),this.$nextTick(function(){if("text"===e.controls.shape){var t=e.$refs.canvas_text;e.canvas_text="",t.style.display="block",t.style.width=0,t.style.left=e.dragStartLocation.x+"px",t.style.top=e.dragStartLocation.y+"px";var a=e;t.addEventListener("mouseup",function(){a.dragging=!1})}})},onDragStop:function(t){var e=this.getCanvasCoordinates(t),a=this.dragStartLocation;if(this.dragging=!1,this.draw(t),"text"===this.controls.shape)this.$refs.canvas_text.focus();else if("pen"===this.controls.shape)this.pen.lineStart=!0,this.pen.lastX=null,this.pen.lastY=null;else if("line"===this.controls.shape){var o={type:this.controls.shape,start_from:a,position:e,strokeColor:this.controls.strokeColor,lineWidth:this.controls.lineWidth};x.push(o)}},drawLine:function(t,e){e.beginPath(),e.moveTo(t.start_from.x,t.start_from.y),e.lineTo(t.position.x,t.position.y),e.lineWidth=t.lineWidth,e.strokeStyle=t.strokeColor,e.stroke()},drawPen:function(t){this.pen.lineStart&&(this.pen.lastX=this.dragStartLocation.x,this.pen.lastY=this.dragStartLocation.y,this.pen.lineStart=!1,this.ctx.beginPath()),this.ctx.lineTo(this.pen.lastX,this.pen.lastY),this.ctx.lineTo(t.x,t.y),this.ctx.stroke(),this.pen.lastX=t.x,this.pen.lastY=t.y},drawCircle:function(t){var e=Math.sqrt(Math.pow(this.dragStartLocation.x-t.x,2)+Math.pow(this.dragStartLocation.y-t.y,2));this.ctx.beginPath(),this.ctx.arc(this.dragStartLocation.x,this.dragStartLocation.y,e,0,2*Math.PI,!1),this.ctx.stroke()},drawText:function(t,e){var a=e.clientY-this.dragStartLocationEvent.clientY,o=e.clientX-this.dragStartLocationEvent.clientX,s=this.$refs.canvas_text;s.style.height=Math.abs(a)+"px",s.style.width=Math.abs(o)+"px"},drawArrow:function(t,e,a,o){var s=10,n=Math.atan2(o-e,a-t);this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(a,o),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(a,o),this.ctx.lineTo(a-s*Math.cos(n-Math.PI/7),o-s*Math.sin(n-Math.PI/7)),this.ctx.lineTo(a-s*Math.cos(n+Math.PI/7),o-s*Math.sin(n+Math.PI/7)),this.ctx.lineTo(a,o),this.ctx.lineTo(a-s*Math.cos(n-Math.PI/7),o-s*Math.sin(n-Math.PI/7)),this.ctx.stroke(),this.ctx.fill()},getCanvasCoordinates:function(t){var e=t.clientX-this.canvas.getBoundingClientRect().left,a=t.clientY-this.canvas.getBoundingClientRect().top;return{x:e,y:a}},draw:function(t){var e=this.getCanvasCoordinates(t);switch(this.getSnapshot(),this.controls.shape){case"line":var a={type:this.controls.shape,start_from:this.dragStartLocation,position:e,strokeColor:this.controls.strokeColor,lineWidth:this.controls.lineWidth};this.drawLine(a,this.ctx);break;case"circle":this.drawCircle(e);break;case"pen":this.drawPen(e);break;case"text":this.drawText(e,t);break;case"arrow":this.drawArrow(this.dragStartLocation.x,this.dragStartLocation.y,e.x,e.y);break}},wrapText:function(t,e,a,o,s,n){for(var i=e.split("\n"),r=0;r<i.length;r++){for(var l=i[r].split(" "),c="",h=0;h<l.length;h++){var p=c+l[h]+" ",d=t.measureText(p),u=d.width;u>s&&h>0?(t.fillText(c,a,o),c=l[h]+" ",o+=n):c=p}t.fillText(c,a,o+r*n)}},takeSnapshot:function(){this.snapshot=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},getSnapshot:function(){this.ctx.putImageData(this.snapshot,0,0)},clearImage:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.initCanvasBg()},saveCanvasAsImage:function(){var t=this,e=this.canvas.toDataURL("image/png");this.$nextTick(function(){t.$emit("input",{src:e,key:t.value.key})})},saveCanvasText:function(t){var e=this,a=this.$refs.canvas_text;if(this.canvas_text){this.ctx.fillStyle=this.controls.textColor,this.ctx.textBaseline="top",this.ctx.font="".concat(this.controls.fontSize,"px 'Avenir', Helvetica, Arial, sans-serif");var o=this.getCanvasCoordinates({clientX:t.target.offsetLeft+t.target.clientWidth,clientY:t.target.offsetTop});this.wrapText(this.ctx,this.canvas_text,o.x+3,o.y+4,a.clientWidth,25),this.canvas_text=null,this.$nextTick(function(){e.ctx.fillStyle=e.controls.fillColor})}else a.style.display="none"}},watch:{"controls.lineWidth":function(t,e){this.ctx.lineWidth=t},"controls.strokeColor":function(t,e){this.ctx.strokeStyle=t,this.ctx.fillStyle=t},"controls.shape":function(t,e){this.$refs.canvas_text.style.display="none"}}},w=C,y=Object(v["a"])(w,l,c,!1,null,null,null),b=y.exports,S={components:{ImageEditor:b},data:function(){return{imagesPreview:[],selectedImage:null}},methods:{onChange:function(){var t=this,e=this.$refs.uploader.files||this.$refs.uploader_2.files;if(console.log(e),console.log("start uploading"),e&&e.length)for(var a=function(a){var o=e[a];if(!o.type.match("image/*"))return console.log("".concat(o.name," must be an image")),"continue";var s=new FileReader;s.onload=function(e){t.imagesPreview.push({src:e.target.result,key:Date.now()+a})},s.readAsDataURL(o)},o=0;o<e.length;o++)a(o);else console.log("no images...")},removeImage:function(t){this.imagesPreview.splice(t,1)},editImage:function(t){this.selectedImage=t},imageEdited:function(t){if(console.log(t),t){var e=this.imagesPreview.findIndex(function(e){return e.key===t.key});this.imagesPreview[e].src=t.src,this.selectedImage=null}}}},k=S,_=Object(v["a"])(k,i,r,!1,null,null,null),I=_.exports,P={name:"app",components:{UploadImage:I}},$=P,L=(a("ZL7j"),Object(v["a"])($,s,n,!1,null,null,null)),T=L.exports;a("qJvR");o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(T)}}).$mount("#app")},ZL7j:function(t,e,a){"use strict";var o=a("slcd"),s=a.n(o);s.a},qJvR:function(t,e,a){},slcd:function(t,e,a){}});
//# sourceMappingURL=app.43be6095.js.map